:toc: macro
:toc-title: Tabla de Contenidos
:toclevels: 3

# https://github.com/wren-lang/wren[_Wren]_ Adventures

En este pequeño documento se detallarán lo básico del lenguaje de programación http://wren.io[Wren]. 

Escrito por https://ninjas.cl[Camilo Castro] y https://github.com/ninjascl/wren-adventures/graphs/contributors[colaboradores]. Para https://ninjas.cl[Ninjas.cl].

Esta obra está bajo una http://creativecommons.org/licenses/by-nc-sa/4.0/[Licencia Creative Commons Atribución-No-Comercial-Compartir-Igual 4.0 Internacional]

http://creativecommons.org/licenses/by-nc-sa/4.0/[image:https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png[Licencia Creative Commons]]

toc::[]

## Pequeña Historia de https://github.com/wren-lang/wren[_Wren]_

https://github.com/wren-lang/wren[_Wren]_ es un lenguaje de programación https://es.wikipedia.org/wiki/Programaci%C3%B3n_orientada_a_objetos[orientado a objetos] creado por http://journal.stuffwithstuff.com/[Bob Nystrom], un ex desarrollador de videojuegos y creador de otros lenguajes de programación como https://github.com/munificent/vigil[Vigil], http://finch.stuffwithstuff.com/[Finch] y http://magpie-lang.org/[Magpie]. Ha escrito dos libros: http://gameprogrammingpatterns.com/[Game Programming Patterns] y http://craftinginterpreters.com/[Crafting Interpreters]. 

El primer _commit_ de _Wren_ fue escrito el https://github.com/wren-lang/wren/tree/2f6a6889f1b4a1ba86aeb169e7398704b1ee04c0[22 de Octubre del 2013] y su versión más reciente es la _0.3_. Actualmente _Bob Nystrom_ pasó a ser colaborador y la evolución del lenguaje fue asignada a https://github.com/underscorediscovery[_discovery] (creador del https://luxeengine.com[game engine Luxe]).

_Wren_ fue creado como una alternativa a _Lua_ y otros https://en.wikipedia.org/wiki/Scripting_language[lenguajes de scripting] para personas que estuvieran más familiarizadas con lenguajes orientados a objetos como _Java_, _C#_, o _C++_. Su principal foco es la simpleza.

La página oficial de Wren es http://wren.io[Wren.io].

### ¿Qué es un _Wren_?

_Wren_ es una https://es.wikipedia.org/wiki/Troglodytidae[tipo de ave pequeña] perteneciente a la familia de los troglodítidos. En Chile tenemos al https://www.avesdechile.cl/074.htm[Chercán o Chochin Criollo].

image:https://user-images.githubusercontent.com/292738/77261969-2240d580-6c71-11ea-93d0-4341e82c2f92.png[Chochin Criollo - Fotografía por Juan Tassara B.]

> Fotografía por Juan Tassara B en https://www.avesdechile.cl.


## ¿Cómo usar Wren?

_Wren_ es un lenguaje interpretado, lo que significa que no requiere de compilación. Basta simplemente tener un intérprete para ejecutar los algoritmos. Hay varias alternativas.

1. https://github.com/wren-lang/wren[Compilar tu propio intérprete de _Wren_]. Esta es la opción para valientes.

2. https://github.com/wren-lang/wren-cli/releases[Utiliza _Wren CLI_] para ejecutar archivos _*.wren_.

3. Utiliza un engine de juegos como https://domeengine.com/[_Dome_], https://tic.computer[_TIC 80_] o https://luxeengine.com/alpha/[_Luxe_] que traen _Wren_ listo para llegar y utilizar.

4. Utiliza http://ppvk.github.io/wren-nest/[_Wren Nest_] para probar el lenguaje en tu navegador. (Puede que no tenga las últimas novedades).

Una vez que tengas tu intérprete instalado puedes ejecutar `wren main.wren` para ver el resultado de tu script.

## Nociones Básicas

### Saltos de línea

_Wren_ utiliza los saltos de línea (`\n`), por lo que no es necesario utilizar el punto y coma (`;`) para separar instrucciones. Sin embargo omite los saltos de línea si la instrucción espera más información para ser válida.

#### Ejemplo: *String multi línea*

_Wren_ permite string multilíneas utilizando el caracter de comillas dobles (`"`). El mismo caracter sirve para líneas simples. El caracter de comilla simple (`'`) no es significativo para _Wren_.

```js
"
 Todo esto es una string multi línea
 Wren esperará hasta que aparezca 
 la siguiente comilla doble.
 Los strings multi línea en Wren guardan tanto espacios como saltos de línea en su interior.
 (no son omitidos).
"
```

#### Ejemplo: *Lista de elementos*

```js
var animales = [
  "perro",
  "gato",
  "condor",
  "huemul"
]
```

#### Ejemplo: *Parámetros de un método*

```js
 MiClase.metodo(
       parametro1,
       parametro2,
       parametro3
 )
```

#### Ejemplo: *Generar un número al azar del 0 al 9*.

Al considerar los saltos de línea significativos, 
provoca un comportamiento inusual al momento de llamar métodos.

Instrucción en una sola línea.

```js
Random.new().int(10)
```

Esto no es válido en _Wren_ (Pero si es válido en la mayoría de los lenguajes de programación).

```js
Random
.new()
.int(10)
```

Para ser válido necesitamos poner un punto al final de la línea.

```js
Random.
new().
int(10)
```

Este comportamiento inusual espera ser reparado en la versión `0.4`.

#### Ejemplo: *Error*

La siguiente línea arroja error debido a que no tiene un salto de línea o una operación.

```js
Random.new().int(10) Random.new().int(10)
```

### Palabras Reservadas

_Wren_ es un lenguaje simple y pequeño. Sus palabras reservadas son las siguientes:

```js
break class construct else false for foreign if import 
in is null return static super this true var while
```

#### Caracteres Significativos

- Caracteres comunes (`+ - * / % < > = ! ( ) [ ] | . " { } , & ^ ? : ~ _`)
- Retorno de carro (`\n`)

### Comentarios

Los comentarios utilizan la misma sintaxis que el https://es.wikipedia.org/wiki/C_(lenguaje_de_programaci%C3%B3n)[`Lenguaje de Programación C`].

Los símbolos son los siguientes: `/* */` (multi línea) y `//` (línea única).

```

// Comentario de una sola línea

/*
Este comentario 
tiene múltiples
líneas
*/
```

Se pueden anidar los comentarios. útil para comentar código que ya tenga comentarios.

```
/*
Este comentario 
tiene múltiples
líneas.
  /* También puedes incluir comentarios, 
  dentro de comentarios multi línea. 
  */
*/
```

#### Tip

Puedes combinar los comentarios de una sola línea con los de múltiples líneas para
comentar/descomentar rápidamente secciones de código.

```js
// /*
   codigo()
// */
```

Al eliminar el comentario de la primera línea, el código será comentado. De esta forma rápidamente
puedes activar o desactivar secciones de código.

```js
/*
   codigo()
// */
```

Puede aún ser más simplificado de esta forma

```js
//*
   codigo()
// */
```

Si se elimina el primer `/` el código será comentado. Por lo que se ahorra un par de movimientos al realizar el comentario.

```js
/*
   codigo()
// */
```

### Identificadores

Similar al _Lenguaje C_, para los indentificadores se pueden utilizar los caracteres de la http://www.asciitable.com/[lista `ascii`] y comenzar con un caracter alfabético o guión bajo. Los identificadores en _Wren_ diferencian entre mayúsculas y minúsculas. Solo se permiten letras (`A - Z`, `a - z`), números (`0 - 9`) y guión bajo (`_`). No se permiten espacios o comenzar con un número.

#### Ejemplo de Identificadores válidos

```js
hola 
camelCase 
PascalCase 
_under_score 
abc123 
TODAS_MAYUSCULAS
```

#### Ejemplo de Identificadores no válidos

```
13hola 
mi-variable
$miVariable 
mi variable
ñandú
👨miVariable
mi👩Variable
```

#### Unicode

No están permitidos caracteres https://es.wikipedia.org/wiki/UTF-8[UTF-8] como la `Ñ` o los emojis en los identificadores. Sin embargo las `Strings` las soportan en su contenido sin problemas. Hay lenguajes como https://swift.org/[_Swift_] que si soportan identificadores con emojis, aunque la utilidad de esta práctica es debatible.

#### Identificadores con Guión Bajo

Un caso especial es para los identificadores con guión bajo como `_color` (un guión bajo al principio) y `__sabor` (dos guiones bajos al principio). Con un guión bajo indica que es un campo de instancia, mientras que con dos guiones bajos indican que es un campo de clase. Más detalles en la sección de Clases.

### Strings

Las cadenas de caracteres son delimitadas por las comillas dobles (`"`). Pueden ser de una sola línea o multi línea. En el caso de ser multi línea, estas conservarán todos los caracteres de espacio y salto de línea contenidos en el _string_.

Las strings pueden contener caracteres unicode.

#### Contando el largo del string

Si utilizamos la propiedad `count` podremos obtener el largo de un string.

Por ejemplo `"hola".count` devolverá `4`. Hay que tener cuidado con los caracteres unicode (emojis), ya que el largo dependerá de lo que se esté contando. _Wren_ cuenta los escalares unicode cuando se trata de emojis (similar al comportamiento de https://www.ruby-lang.org/en/[_Ruby_] y https://www.python.org/[_Python 3_]).

```js

System.print("a".count) // Retorna 1.
System.print("a".bytes.count) // Retorna 1 (Parte de la tabla ASCII original).

System.print("ñ".count) // Retorna 1.
System.print("ñ".bytes.count) // Retorna 2.

System.print("👨‍👩‍👧‍👦".count) // Retorna 7 al contar los caracteres escalares de Unicode
System.print("👨‍👩‍👧‍👦".bytes.count) // Retorna 25 al contar unidades de código UTF-8
```

`System.print("👨‍👩‍👧‍👦".count)` retorna 7 por que se está contando los caracteres escalares de unicode, es decir, el emoji 👨‍👩‍👧‍👦 está formado por los siguientes escalares : 👨 + caracter de unión de ancho cero + 👩 + caracter de unión de ancho cero + 👧 + caracter de unión de ancho cero + 👦.

Hay dos formas de contar adicionales que _Wren_ todavía no soporta. Que es contar por unidades de código _UTF-16_ y considerar los emojis compuestos como una unidad.

El string "👨‍👩‍👧‍👦" debería ser de largo 11 para la codificación _UTF-16_. Mientras que debería ser de largo 1 si lo consideramos como un caracter singular.

